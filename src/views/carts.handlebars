<header class="bg-light">
    <div class="p-4 mb-2 bg-light text-dark">
        <div class="text-center text-dark">
            <p class="display-6 fw-bolder mt-4">Bienvenido {{user.first_name}}</p>
        </div>
        <div class="d-flex bd-highlight">
            <div class="p-0 flex-grow-1 bd-highlight">Email: {{user.email}} </div>
            <div class="p-0 flex-shrink-1 bd-highlight">Role: {{user.role}}</div>
        </div>
    </div>
</header>
<h1 style="text-align:center">Carrito {{cart._id}}</h1>
<section class="container">
    <table class="table table-success table-striped">
        <thead>
            <tr style="vertical-align: middle; text-align:center;">
                <th scope="col">Imagen</th>
                <th scope="col">SKU</th>
                <th scope="col">Descripcion</th>
                <th scope="col">Cantidad</th>
                <th scope="col">Precio</th>
                <th scope="col">Eliminar</th>
            </tr>
        </thead>
        <tbody>
            {{#each cart.products}}
                <tr style="vertical-align: middle; text-align:center;">
                    <td>
                        <div class="d-flex align-items-center">
                            {{#if this.product.thumbnail}}
                                {{#if this.product.thumbnail.[0]}}
                                    <img class="rounded-circle" src="{{this.product.thumbnail.[0]}}" width="50" alt="Imagen de Articulo">
                                {{else}}
                                    <img class="rounded-circle" src="/img/Imagen_no_disponible.png" width="50" alt="Imagen de Articulo">
                                {{/if}}
                            {{else}}
                                <img class="rounded-circle" src="/img/Imagen_no_disponible.png" width="50" alt="Imagen de Articulo">
                            {{/if}}
                        </div>
                    </td>
                    <td>{{this.product.code}}</td>
                    <td>{{this.product.description}}</td>
                    <td>{{this.quantity}}</td>
                    <td>{{this.product.price}}</td>
                    <td><button onclick="borrarProductoCarrito('{{this.product._id}}', '{{../cart._id}}')" class="btn btn-sm btn-danger"><i class="bi bi-trash3-fill"></i></button></td>    
                </tr>
            {{/each}}
            <tr style="vertical-align: middle; text-align:center;">
                <td></td>
                <td></td>
                <td><b>TOTAL</b></td>
                <td><b><span id="idContadorCarrito" class="ms-1 rounded-pill">{{cant}}</span></b></td>
                <td><b><span id="idTotalCarrito" class="ms-1 rounded-pill">{{total}}</span> $</b></td>

            </tr>
        </tbody>
    </table>

    <div class="text-center">
        <button onclick="finalizarCompra('{{cart._id}}')" id="finCompra" type="button" class="btn btn-secondary">Finalizar Compra</button>
    </div>
    <br>
    <div class="text-center">
        <a href="/products"><button type="button" class="btn btn-secondary">Volver a la Tienda</button></a>
    </div>
</section>
<script src="/js/purchase.js"></script>